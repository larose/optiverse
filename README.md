# Optiverse

Optiverse is a Python library for evolving code and algorithms using Large Language Models (LLMs). It's inspired by DeepMind's [AlphaEvolve](https://deepmind.google/discover/blog/alphaevolve-a-gemini-powered-coding-agent-for-designing-advanced-algorithms/).

ðŸ“– **Read the announcement post:** [Optiverse: Evolving Code with LLMs](https://mathieularose.com/optiverse-evolving-code-with-llms)


## Table of Contents

- [Quick Start](#quick-start)
- [License](#license)

## Quick Start

Follow these steps to set up Optiverse and run an example.

### 1. Set Up Environment

Create a virtual environment and install dependencies:

```bash
make init
```

### 2. Run the Traveling Salesman Problem example:

This example uses Optiverse to solve the [Traveling Salesman Problem (TSP)](https://en.wikipedia.org/wiki/Travelling_salesman_problem). The code is in the [examples/tsp](examples/tsp) directory.

The example supports multiple LLM providers through environment variables:
- `LLM_API_KEY`: Your API key for the chosen provider
- `LLM_MODEL`: The model name to use
- `LLM_PROVIDER`: The provider name (`openai`, `google`, or `nvidia`)

Example with Google Gemini:

```bash
LLM_API_KEY="your-gemini-api-key" LLM_MODEL="gemini-2.0-flash" LLM_PROVIDER="google" make run.tsp
```

Note: Optiverse uses the OpenAI package under the hood, so it supports any LLM provider that follows the OpenAI API standard.

### Sample Output:

When you run it, you'll see output like this:

```bash
2025-07-17 09:35:47 - optiverse.optimizer - INFO - Evaluating and saving initial solution...
2025-07-17 09:35:47 - examples.tsp.evaluator - INFO - Score 1: 33800.20318013358
2025-07-17 09:35:47 - examples.tsp.evaluator - INFO - Score 2: 32719.233809839046
2025-07-17 09:35:48 - examples.tsp.evaluator - INFO - Score 3: 35557.94658416552
2025-07-17 09:35:48 - optiverse.optimizer - INFO - Initial solution saved with ID: d3c1a4eb294e469593b52ee805d7028b, score: 34025.79452471271
2025-07-17 09:35:48 - optiverse.optimizer - INFO - Starting iteration 1/100
2025-07-17 09:35:50 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
2025-07-17 09:35:51 - optiverse.solution_generator - INFO - No code blocks found in LLM response
2025-07-17 09:35:51 - optiverse.optimizer - INFO - No code generated by solution generator
2025-07-17 09:35:51 - optiverse.optimizer - INFO - Starting iteration 2/100
2025-07-17 09:35:52 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/openai/chat/completions "HTTP/1.1 200 OK"
2025-07-17 09:35:58 - optiverse.optimizer - INFO - Evaluating solution
2025-07-17 09:36:09 - examples.tsp.evaluator - INFO - Score 1: 3149.0239046268334
2025-07-17 09:36:21 - examples.tsp.evaluator - INFO - Score 2: 3200.6735649311436
2025-07-17 09:36:30 - examples.tsp.evaluator - INFO - Score 3: 3089.4221942253616
2025-07-17 09:36:30 - optiverse.optimizer - INFO - Evaluation result: 3146.3732212611126
2025-07-17 09:36:30 - optiverse.optimizer - INFO - Saved solution with ID: 564d577d222a42ba8e1defb0dd2870e3

...
```

### Understanding the Results

During optimization, Optiverse saves results in directories named `tmp/YYYYMMDD_HHMM`, indicating the date and time of each run.

#### `solutions.csv`


Inside each run directory, `solutions.csv` provides a high-level overview of all solutions explored:


| id                                 | score           | t_group | t_move      | t_parent_id_1                  | ... |
|------------------------------------|-----------------|---------|-------------|-------------------------------|-----|
| 0d8c5789dde24a94901871c18d6d9854  | 2817.0555492637 | 1       | exploitation| 034afd2da8894ab6838efb17bc28f201 | ... |
| a42574709f27484fade7adc76683b2cf  | 2828.6215589938 | 6       | exploitation| 96c7140054154a20a4b67fd986658dd4 | ... |
| 883f6de275c14b32822feb5cdaaba55d  | 2837.3500311898 | 6       | exploitation| a42574709f27484fade7adc76683b2cf | ... |


#### Individual Solution Directories

Each solution has a dedicated directory named after its ID, containing:

- `prompt.md`: The prompt sent to the LLM.
- `solution.txt`: The code generated by the LLM.
- `description.txt`: The LLM's own explanation of the changes it made.
- `metadata.json`: Metadata including ID and score.
- `*_stdout.txt` and `*_strerr.txt`: Program logs for debugging.


## License

Optiverse is open source and licensed under the GNU General Public License v3.0 (GPLv3).
